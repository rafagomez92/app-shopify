{"ast":null,"code":"import axios from 'axios';\nexport default (async (req, res) => {\n  const tmp = req.headers.cookie.split('; ').reduce(function (result, v, i, a) {\n    var k = v.split('=');\n    result[k[0]] = k[1];\n    return result;\n  }, {}); //console.log('mi galleta',tmp)\n\n  console.log('mi req', req);\n  const headers = {\n    headers: {\n      'x-shopify-access-token': tmp.accessToken\n    }\n  };\n  const url = 'https://' + tmp.shopOrigin + '/admin/api/2019-10/';\n  const response = await axios.get(url + 'shop.json', headers); //console.log('response from shopify',response)    \n\n  if (response.status === 200) {\n    const data = JSON.parse(JSON.stringify(response.data.shop));\n    res.statusCode = 200;\n    res.setHeader('Content-Type', 'application/json');\n    res.end(JSON.stringify({\n      shop: data\n    }));\n  } else {\n    res.statusCode = 400;\n  }\n});","map":{"version":3,"sources":["C:/Users/rafae/Desktop/Bootcamp/Front-Back/app_shopify/pages/api/shopify.js"],"names":["axios","req","res","tmp","headers","cookie","split","reduce","result","v","i","a","k","console","log","accessToken","url","shopOrigin","response","get","status","data","JSON","parse","stringify","shop","statusCode","setHeader","end"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,gBAAe,OAAMC,GAAN,EAAWC,GAAX,KAAiB;AAE5B,QAAMC,GAAG,GAAGF,GAAG,CAACG,OAAJ,CAAYC,MAAZ,CAAmBC,KAAnB,CAAyB,IAAzB,EAA+BC,MAA/B,CAAsC,UAASC,MAAT,EAAiBC,CAAjB,EAAoBC,CAApB,EAAuBC,CAAvB,EAA0B;AAAE,QAAIC,CAAC,GAAGH,CAAC,CAACH,KAAF,CAAQ,GAAR,CAAR;AAAsBE,IAAAA,MAAM,CAACI,CAAC,CAAC,CAAD,CAAF,CAAN,GAAeA,CAAC,CAAC,CAAD,CAAhB;AAAqB,WAAOJ,MAAP;AAAgB,GAA7H,EAA+H,EAA/H,CAAZ,CAF4B,CAG5B;;AACAK,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBb,GAAtB;AAGA,QAAMG,OAAO,GAAI;AAACA,IAAAA,OAAO,EAAE;AAAE,gCAA0BD,GAAG,CAACY;AAAhC;AAAV,GAAjB;AACA,QAAMC,GAAG,GAAG,aAAab,GAAG,CAACc,UAAjB,GAA8B,qBAA1C;AAEA,QAAMC,QAAQ,GAAG,MAAMlB,KAAK,CAACmB,GAAN,CAAWH,GAAG,GAAG,WAAjB,EAA8BZ,OAA9B,CAAvB,CAV4B,CAW5B;;AAEA,MAAGc,QAAQ,CAACE,MAAT,KAAkB,GAArB,EAAyB;AAErB,UAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeN,QAAQ,CAACG,IAAT,CAAcI,IAA7B,CAAX,CAAb;AAEAvB,IAAAA,GAAG,CAACwB,UAAJ,GAAiB,GAAjB;AACAxB,IAAAA,GAAG,CAACyB,SAAJ,CAAc,cAAd,EAA8B,kBAA9B;AACAzB,IAAAA,GAAG,CAAC0B,GAAJ,CAAQN,IAAI,CAACE,SAAL,CAAgB;AAACC,MAAAA,IAAI,EAAGJ;AAAR,KAAhB,CAAR;AAEH,GARD,MAQK;AACDnB,IAAAA,GAAG,CAACwB,UAAJ,GAAiB,GAAjB;AACH;AAEJ,CAzBD","sourcesContent":["import axios from 'axios'\r\nexport default async(req, res)=>{\r\n    \r\n    const tmp = req.headers.cookie.split('; ').reduce(function(result, v, i, a) { var k = v.split('='); result[k[0]] = k[1]; return result; }, {})\r\n    //console.log('mi galleta',tmp)\r\n    console.log('mi req', req)\r\n\r\n\r\n    const headers =  {headers: { 'x-shopify-access-token': tmp.accessToken }} \r\n    const url = 'https://' + tmp.shopOrigin + '/admin/api/2019-10/'\r\n    \r\n    const response = await axios.get( url + 'shop.json', headers)\r\n    //console.log('response from shopify',response)    \r\n    \r\n    if(response.status===200){\r\n\r\n        const data = JSON.parse(JSON.stringify(response.data.shop))\r\n\r\n        res.statusCode = 200\r\n        res.setHeader('Content-Type', 'application/json')    \r\n        res.end(JSON.stringify( {shop:  data} ))    \r\n\r\n    }else{\r\n        res.statusCode = 400\r\n    }\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}