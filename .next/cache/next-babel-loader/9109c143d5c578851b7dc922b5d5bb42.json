{"ast":null,"code":"//acciones con axios async\n//usamos thunk\nimport axios from 'axios';\nimport Creators from './actions';\nimport VariantCreators from '../variant/actions'; // A ===================\n//funciones que uso internamente en este archivo\n//pero que el componente no necesita ejecutar\n\nvar _saveShopifyData = Creators.saveShopifyData;\nvar _shopExists = Creators.shopExists;\nvar _shopNotExists = Creators.shopNotExists;\nvar _isLoading = Creators.isLoading;\nvar _isNotLoading = Creators.isNotLoading;\nvar _setError = Creators.setError;\nvar clearError = Creators.clearError;\nvar updatePruebaNieto = Creators.updatePruebaNieto;\nvar updatePruebaTitulo = Creators.updatePruebaTitulo;\nvar _setVariants = VariantCreators.setVariants; // B ===================\n//fuciones que se conectan con apis\n//async usan thunk\n\nvar getShopifyData = function getShopifyData() {\n  return function (dispatch) {\n    var instanceShopify = axios.create({\n      baseURL: '/api',\n      timeout: 5000\n    });\n    return instanceShopify.get(\"/shopify\").then(function (response) {\n      var shop = response.data.shop;\n      dispatch(_saveShopifyData(shop));\n      var id = shop.id;\n      axios.get(\"/store/\".concat(id)).then(function (response) {\n        dispatch(_shopExists(response.data));\n        dispatch(_setVariants(response.data.variants));\n      }, function (error) {\n        dispatch(_shopNotExists());\n      });\n    }, function (error) {});\n  };\n};\n\nvar createShop = function createShop(payload) {\n  return function (dispatch) {\n    dispatch(_isLoading());\n    axios.post('/store', payload).then(function (response) {\n      dispatch(_shopExists(response.data));\n    }, function (err) {\n      dispatch(_shopNotExists());\n\n      switch (err.response.status) {\n        case 400:\n          dispatch(_setError('Error de validacion, verifique sus datos'));\n          break;\n\n        default:\n          dispatch(_setError('Error de servidor'));\n      }\n    });\n  };\n}; // C ===================\n//exportar las funciones que finalmente se van a comunicar\n//con los componentes reales es decir tienen comunicacion\n//con el exterior\n\n\nexport default {\n  getShopifyData: getShopifyData,\n  createShop: createShop,\n  clearError: clearError,\n  updatePruebaNieto: updatePruebaNieto,\n  updatePruebaTitulo: updatePruebaTitulo\n};","map":{"version":3,"sources":["C:/Users/rafae/Desktop/Bootcamp/Front-Back/app_shopify/store/shopifystore/operations.js"],"names":["axios","Creators","VariantCreators","_saveShopifyData","saveShopifyData","_shopExists","shopExists","_shopNotExists","shopNotExists","_isLoading","isLoading","_isNotLoading","isNotLoading","_setError","setError","clearError","updatePruebaNieto","updatePruebaTitulo","_setVariants","setVariants","getShopifyData","dispatch","instanceShopify","create","baseURL","timeout","get","then","response","shop","data","id","variants","error","createShop","payload","post","err","status"],"mappings":"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","sourcesContent":["//acciones con axios async\r\n//usamos thunk\r\n\r\nimport axios from 'axios'\r\nimport Creators from './actions'\r\nimport VariantCreators from '../variant/actions'\r\n\r\n\r\n// A ===================\r\n//funciones que uso internamente en este archivo\r\n//pero que el componente no necesita ejecutar\r\nconst _saveShopifyData  = Creators.saveShopifyData\r\nconst _shopExists       = Creators.shopExists\r\nconst _shopNotExists    = Creators.shopNotExists\r\nconst _isLoading        = Creators.isLoading\r\nconst _isNotLoading     = Creators.isNotLoading\r\nconst _setError         = Creators.setError\r\nconst clearError        = Creators.clearError\r\nconst updatePruebaNieto = Creators.updatePruebaNieto\r\nconst updatePruebaTitulo = Creators.updatePruebaTitulo\r\nconst _setVariants        = VariantCreators.setVariants\r\n\r\n\r\n\r\n\r\n// B ===================\r\n//fuciones que se conectan con apis\r\n//async usan thunk\r\nconst getShopifyData = () => {\r\n\r\n    return (dispatch) => {\r\n\r\n        const instanceShopify = axios.create({\r\n            baseURL: '/api',\r\n            timeout: 5000\r\n        })\r\n\r\n        return instanceShopify.get(`/shopify`)\r\n            .then( response =>{\r\n\r\n\r\n                const { shop } = response.data\r\n                dispatch(_saveShopifyData(shop))                \r\n\r\n                const { id } = shop\r\n                axios.get(`/store/${id}`)\r\n                    .then ( response =>{\r\n\r\n                        dispatch(_shopExists(response.data))\r\n                        dispatch(_setVariants(response.data.variants))\r\n\r\n                    }, error=>{\r\n\r\n                        dispatch(_shopNotExists())\r\n\r\n                    })\r\n\r\n\r\n            }, error=>{\r\n\r\n            })\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\nconst createShop = (payload)=>{\r\n\r\n    return (dispatch) => {\r\n        dispatch(_isLoading())\r\n\r\n        axios.post('/store',payload)\r\n            .then(response=>{\r\n                dispatch(_shopExists(response.data))\r\n\r\n            },err=>{\r\n                dispatch(_shopNotExists())\r\n\r\n                switch(err.response.status){\r\n                    case 400:\r\n                        dispatch(_setError('Error de validacion, verifique sus datos'))\r\n                        break;\r\n                    default:\r\n                        dispatch(_setError('Error de servidor'))                        \r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n// C ===================\r\n//exportar las funciones que finalmente se van a comunicar\r\n//con los componentes reales es decir tienen comunicacion\r\n//con el exterior\r\nexport default {\r\n    getShopifyData,\r\n    createShop,\r\n    clearError,\r\n\r\n\r\n    updatePruebaNieto,\r\n    updatePruebaTitulo\r\n}"]},"metadata":{},"sourceType":"module"}