{"ast":null,"code":"//acciones con axios async\n//usamos thunk\nimport axios from 'axios';\nimport Creators from './actions'; // A ===================\n//funciones que uso internamente en este archivo\n//pero que el componente no necesita ejecutar\n\nconst _saveShopifyData = Creators.saveShopifyData;\nconst _shopExists = Creators.shopExists;\nconst _shopNotExists = Creators.shopNotExists;\nconst _isLoading = Creators.isLoading;\nconst _setError = Creators.setError;\nconst clearError = Creators.clearError; // B ===================\n//fuciones que se conectan con apis\n//async usan thunk\n\nconst getShopifyData = () => {\n  return dispatch => {\n    const instanceShopify = axios.create({\n      baseURL: '/api',\n      timeout: 5000\n    });\n    return instanceShopify.get(`/shopify`).then(response => {\n      const {\n        shop\n      } = response.data;\n      dispatch(_saveShopifyData(shop));\n      const {\n        id\n      } = shop;\n      axios.get(`/store/${id}`).then(response => {\n        dispatch(_shopExists(response.data));\n      }, error => {\n        dispatch(_shopNotExists());\n      });\n    }, error => {});\n  };\n};\n\nconst createShop = payload => {\n  return dispatch => {\n    dispatch(_isLoading());\n    axios.post('/store', payload).then(response => {\n      dispatch(_shopExists(response.data));\n    }, err => {\n      dispatch(_shopNotExists());\n\n      switch (err.response.status) {\n        case 400:\n          dispatch(_setError('Error de validación, verifique sus datos'));\n          break;\n\n        default:\n          dispatch(_setError('Error de servidor'));\n      }\n    });\n  };\n}; // C ===================\n//exportar las funciones que finalmente se van a comunicar\n//con los componentes reales es decir tienen comunicacion\n//con el exterior\n\n\nexport default {\n  getShopifyData,\n  createShop,\n  clearError\n};","map":{"version":3,"sources":["C:/Users/rafae/Desktop/Bootcamp/Front-Back/app_shopify/store/shopifystore/operations.js"],"names":["axios","Creators","_saveShopifyData","saveShopifyData","_shopExists","shopExists","_shopNotExists","shopNotExists","_isLoading","isLoading","_setError","setError","clearError","getShopifyData","dispatch","instanceShopify","create","baseURL","timeout","get","then","response","shop","data","id","error","createShop","payload","post","err","status"],"mappings":"AAAA;AACA;AAEA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,WAArB,C,CAGA;AACA;AACA;;AACA,MAAMC,gBAAgB,GAAGD,QAAQ,CAACE,eAAlC;AACA,MAAMC,WAAW,GAAGH,QAAQ,CAACI,UAA7B;AACA,MAAMC,cAAc,GAAGL,QAAQ,CAACM,aAAhC;AACA,MAAMC,UAAU,GAAGP,QAAQ,CAACQ,SAA5B;AACA,MAAMC,SAAS,GAAGT,QAAQ,CAACU,QAA3B;AACA,MAAMC,UAAU,GAAGX,QAAQ,CAACW,UAA5B,C,CAKA;AACA;AACA;;AACA,MAAMC,cAAc,GAAG,MAAM;AAEzB,SAAQC,QAAD,IAAc;AAEjB,UAAMC,eAAe,GAAGf,KAAK,CAACgB,MAAN,CAAa;AACjCC,MAAAA,OAAO,EAAE,MADwB;AAEjCC,MAAAA,OAAO,EAAE;AAFwB,KAAb,CAAxB;AAKA,WAAOH,eAAe,CAACI,GAAhB,CAAqB,UAArB,EACFC,IADE,CACIC,QAAQ,IAAG;AAGd,YAAM;AAAEC,QAAAA;AAAF,UAAWD,QAAQ,CAACE,IAA1B;AACAT,MAAAA,QAAQ,CAACZ,gBAAgB,CAACoB,IAAD,CAAjB,CAAR;AAGD,YAAM;AAAEE,QAAAA;AAAF,UAASF,IAAf;AACCtB,MAAAA,KAAK,CAACmB,GAAN,CAAW,UAASK,EAAG,EAAvB,EACKJ,IADL,CACWC,QAAQ,IAAE;AACbP,QAAAA,QAAQ,CAACV,WAAW,CAACiB,QAAQ,CAACE,IAAV,CAAZ,CAAR;AAEH,OAJL,EAIOE,KAAK,IAAE;AACNX,QAAAA,QAAQ,CAACR,cAAc,EAAf,CAAR;AACH,OANL;AASH,KAlBE,EAkBAmB,KAAK,IAAE,CAET,CApBE,CAAP;AAqBH,GA5BD;AA8BH,CAhCD;;AAkCA,MAAMC,UAAU,GAAIC,OAAD,IAAa;AAC5B,SAAQb,QAAD,IAAc;AACjBA,IAAAA,QAAQ,CAACN,UAAU,EAAX,CAAR;AAEAR,IAAAA,KAAK,CAAC4B,IAAN,CAAW,QAAX,EAAqBD,OAArB,EACCP,IADD,CACMC,QAAQ,IAAE;AACZP,MAAAA,QAAQ,CAACV,WAAW,CAACiB,QAAQ,CAACE,IAAV,CAAZ,CAAR;AACH,KAHD,EAGGM,GAAG,IAAG;AACLf,MAAAA,QAAQ,CAACR,cAAc,EAAf,CAAR;;AACA,cAAOuB,GAAG,CAACR,QAAJ,CAAaS,MAApB;AACI,aAAK,GAAL;AACIhB,UAAAA,QAAQ,CAACJ,SAAS,CAAC,0CAAD,CAAV,CAAR;AACA;;AACJ;AACII,UAAAA,QAAQ,CAACJ,SAAS,CAAC,mBAAD,CAAV,CAAR;AALR;AAOH,KAZD;AAaH,GAhBD;AAiBH,CAlBD,C,CAsBA;AACA;AACA;AACA;;;AACA,eAAe;AACXG,EAAAA,cADW;AAEXa,EAAAA,UAFW;AAGXd,EAAAA;AAHW,CAAf","sourcesContent":["//acciones con axios async\r\n//usamos thunk\r\n\r\nimport axios from 'axios'\r\nimport Creators from './actions'\r\n\r\n\r\n// A ===================\r\n//funciones que uso internamente en este archivo\r\n//pero que el componente no necesita ejecutar\r\nconst _saveShopifyData = Creators.saveShopifyData\r\nconst _shopExists = Creators.shopExists\r\nconst _shopNotExists = Creators.shopNotExists\r\nconst _isLoading = Creators.isLoading\r\nconst _setError = Creators.setError\r\nconst clearError = Creators.clearError\r\n\r\n\r\n\r\n\r\n// B ===================\r\n//fuciones que se conectan con apis\r\n//async usan thunk\r\nconst getShopifyData = () => {\r\n\r\n    return (dispatch) => {\r\n\r\n        const instanceShopify = axios.create({\r\n            baseURL: '/api',\r\n            timeout: 5000\r\n        })\r\n\r\n        return instanceShopify.get(`/shopify`)\r\n            .then( response =>{\r\n\r\n\r\n                const { shop } = response.data\r\n                dispatch(_saveShopifyData(shop))\r\n\r\n\r\n               const { id } = shop\r\n                axios.get(`/store/${id}`)\r\n                    .then (response=>{\r\n                        dispatch(_shopExists(response.data))\r\n\r\n                    }, error=>{\r\n                        dispatch(_shopNotExists())\r\n                    })\r\n\r\n\r\n            }, error=>{\r\n\r\n            })\r\n    }\r\n\r\n}\r\n\r\nconst createShop = (payload) => {\r\n    return (dispatch) => {\r\n        dispatch(_isLoading())\r\n\r\n        axios.post('/store', payload)\r\n        .then(response=>{\r\n            dispatch(_shopExists(response.data))\r\n        }, err=> {\r\n            dispatch(_shopNotExists())\r\n            switch(err.response.status){\r\n                case 400:\r\n                    dispatch(_setError('Error de validación, verifique sus datos'))\r\n                    break;\r\n                default:\r\n                    dispatch(_setError('Error de servidor'))\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\n\r\n\r\n// C ===================\r\n//exportar las funciones que finalmente se van a comunicar\r\n//con los componentes reales es decir tienen comunicacion\r\n//con el exterior\r\nexport default {\r\n    getShopifyData,\r\n    createShop,\r\n    clearError\r\n}\r\n"]},"metadata":{},"sourceType":"module"}