{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Modal, TextContainer, Stack, Thumbnail, Card, Button, Pagination } from '@shopify/polaris';\nimport { MobileAcceptMajorMonotone } from '@shopify/polaris-icons';\nimport { useState, useEffect } from 'react';\n\nconst ResolveConflict = ({\n  variants_with_conflict,\n  variant_in_modal,\n  can_solve,\n  modal_open,\n  closeModal,\n  stepVariant,\n  updateVariantSelections\n}) => {\n  const {\n    0: hasPaginator,\n    1: setHasPaginator\n  } = useState({\n    hasNext: false,\n    hasPrevious: false,\n    price_selected: null\n  });\n  const {\n    id,\n    product_image: image_url,\n    product_title: title,\n    variant_price: price,\n    variant_recommended_price: recommended_price,\n    tax_calculated: calculated_duty = 0,\n    calculated_duty_original = 0,\n    price_selected = null\n  } = variant_in_modal; // Cada que variant_in_modal cambie verificamos el estado del paginador\n\n  useEffect(() => {\n    const v = variants_with_conflict;\n    let p = {\n      hasNext: false,\n      hasPrevious: false,\n      price_selected\n    };\n    if (v.length <= 1) return setHasPaginator(p);\n    const i = v.findIndex(element => element.id === id);\n    if (i > 0) p.hasPrevious = true;\n    if (i < v.length - 1) p.hasNext = true;\n    setHasPaginator(p);\n  }, [variant_in_modal]);\n  let pagination = null;\n\n  if (variants_with_conflict.length > 0) {\n    pagination = __jsx(Pagination, {\n      hasPrevious: hasPaginator.hasPrevious,\n      onPrevious: () => {\n        console.log('Previous');\n        move(-1);\n      },\n      hasNext: hasPaginator.hasNext,\n      onNext: () => {\n        console.log('Next');\n        move(1);\n      }\n    });\n  }\n\n  const handleSubmit = () => {\n    updateVariantSelections();\n  };\n\n  const handleClose = () => {\n    closeModal();\n  };\n\n  const handleSelectPrice = price_selected => {\n    setHasPaginator(_objectSpread({}, hasPaginator, {\n      price_selected\n    }));\n    move(0, price_selected);\n  };\n\n  const move = (step, price_selected) => {\n    if (price_selected === undefined) price_selected = hasPaginator.price_selected;\n    const v = variants_with_conflict;\n    let i = v.findIndex(e => e.id === id) + step;\n\n    if (i >= 0 && i < v.length) {\n      //paso valido\n      stepVariant(price_selected, i);\n    }\n  };\n\n  const footer = __jsx(Stack, null, __jsx(Stack.Item, {\n    fill: true\n  }, pagination), __jsx(Stack.Item, null, __jsx(Button, {\n    primary: true,\n    onClick: handleSubmit,\n    disabled: !can_solve\n  }, \"Guarda mi selecci\\xF3n\")));\n\n  const currentVariant = variants_with_conflict.findIndex(e => e.id === id) + 1;\n  return __jsx(Modal, {\n    large: true,\n    open: modal_open,\n    onClose: handleClose,\n    title: `Conflicto ${currentVariant} de ${variants_with_conflict.length}`,\n    footer: footer\n  }, __jsx(Modal.Section, null, __jsx(TextContainer, null, __jsx(\"div\", null, \"Nuestros expertos sugieren diferentes impuestos que los que usted ha indicado. Seleccione cual es el correcto.\"), __jsx(Stack, {\n    distribution: \"fillEvenly\"\n  }, __jsx(Stack.Item, null, __jsx(Stack, null, __jsx(Thumbnail, {\n    source: image_url\n  }), __jsx(\"div\", null, title))), __jsx(Stack.Item, null, __jsx(\"div\", null, \"Precio Regular: $\", price), __jsx(\"div\", null, \"Impuestos: seleccione a continuaci\\xF3n\"))), __jsx(Stack, {\n    distribution: \"fillEvenly\"\n  }, __jsx(Card, {\n    sectioned: true\n  }, __jsx(\"div\", {\n    className: \"title-wrapper\"\n  }, __jsx(\"div\", {\n    className: \"subtitle\"\n  }, \"Tu ingresaste\")), __jsx(\"div\", {\n    className: \"title-price\"\n  }, \"$\", price), __jsx(\"p\", {\n    className: \"text-center\"\n  }, \"Impuesto $\", calculated_duty_original), __jsx(\"div\", {\n    className: \"text-center mt-10\"\n  }, __jsx(Button, {\n    onClick: () => handleSelectPrice('original'),\n    primary: hasPaginator.price_selected === 'original',\n    icon: hasPaginator.price_selected === 'original' && MobileAcceptMajorMonotone\n  }, \"Seleccionar\"))), __jsx(Card, {\n    sectioned: true\n  }, __jsx(\"div\", {\n    className: \"title-wrapper\"\n  }, __jsx(\"div\", {\n    className: \"subtitle\"\n  }, \"Nosotros recomendamos\")), __jsx(\"div\", {\n    className: \"title-price\"\n  }, \"$\", recommended_price), __jsx(\"p\", {\n    className: \"text-center\"\n  }, \"Impuesto $\", calculated_duty), __jsx(\"div\", {\n    className: \"text-center mt-10\"\n  }, __jsx(Button, {\n    onClick: () => handleSelectPrice('recommended'),\n    primary: hasPaginator.price_selected === 'recommended',\n    icon: hasPaginator.price_selected === 'recommended' && MobileAcceptMajorMonotone\n  }, \"Seleccionar\")))))));\n};\n\nexport default ResolveConflict;","map":{"version":3,"sources":["C:/Users/rafae/Desktop/Bootcamp/Front-Back/app_shopify/components/ResolveConflict.js"],"names":["Modal","TextContainer","Stack","Thumbnail","Card","Button","Pagination","MobileAcceptMajorMonotone","useState","useEffect","ResolveConflict","variants_with_conflict","variant_in_modal","can_solve","modal_open","closeModal","stepVariant","updateVariantSelections","hasPaginator","setHasPaginator","hasNext","hasPrevious","price_selected","id","product_image","image_url","product_title","title","variant_price","price","variant_recommended_price","recommended_price","tax_calculated","calculated_duty","calculated_duty_original","v","p","length","i","findIndex","element","pagination","console","log","move","handleSubmit","handleClose","handleSelectPrice","step","undefined","e","footer","currentVariant"],"mappings":"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","sourcesContent":["import { \r\n    Modal, TextContainer, Stack, Thumbnail, Card, Button, Pagination\r\n\r\n} from '@shopify/polaris'\r\nimport { MobileAcceptMajorMonotone } from '@shopify/polaris-icons'\r\n\r\nimport { useState, useEffect} from 'react'\r\n\r\nconst ResolveConflict = ({\r\n    variants_with_conflict,\r\n    variant_in_modal,\r\n    can_solve,\r\n    modal_open,\r\n\r\n    closeModal,\r\n    stepVariant,\r\n    updateVariantSelections\r\n})=>{\r\n\r\n\r\n    const [hasPaginator, setHasPaginator ] = useState({ hasNext: false, hasPrevious: false, price_selected: null })\r\n\r\n    const {\r\n        id,\r\n        product_image: image_url,\r\n        product_title: title,\r\n        variant_price: price,\r\n        variant_recommended_price: recommended_price,\r\n        tax_calculated: calculated_duty=0,\r\n        calculated_duty_original=0,\r\n        price_selected=null\r\n\r\n    } = variant_in_modal\r\n\r\n\r\n\r\n    // Cada que variant_in_modal cambie verificamos el estado del paginador\r\n    useEffect(()=>{\r\n\r\n        const v = variants_with_conflict\r\n        let p = { hasNext: false, hasPrevious: false, price_selected }\r\n        if(v.length<=1) return setHasPaginator(p)\r\n        const i = v.findIndex(element=> element.id ===id)\r\n        if(i>0) p.hasPrevious = true;\r\n        if(i<v.length-1) p.hasNext= true;\r\n        setHasPaginator(p)\r\n\r\n    },[variant_in_modal])\r\n\r\n\r\n   \r\n\r\n    let pagination = null\r\n    if(variants_with_conflict.length>0){\r\n        pagination = (\r\n            <Pagination \r\n                hasPrevious={hasPaginator.hasPrevious}\r\n                onPrevious={()=>{\r\n                    console.log('Previous')\r\n                    move(-1)\r\n                }}\r\n                hasNext={hasPaginator.hasNext}\r\n                onNext={()=>{\r\n                    console.log('Next')\r\n                    move(1)\r\n                }}\r\n            />\r\n        )\r\n\r\n    }\r\n\r\n\r\n    const handleSubmit = ()=>{\r\n        updateVariantSelections()\r\n    }\r\n\r\n    const handleClose = () =>{\r\n        closeModal()\r\n    }\r\n\r\n    const handleSelectPrice = (price_selected)=>{\r\n\r\n        setHasPaginator({ ...hasPaginator, price_selected })\r\n        move(0, price_selected)\r\n    }\r\n\r\n    const move = (step, price_selected) => {\r\n        if(price_selected===undefined) price_selected = hasPaginator.price_selected\r\n        const v = variants_with_conflict\r\n        let i = v.findIndex(e=> e.id===id) + step\r\n        if(i>=0 && i<v.length){\r\n            //paso valido\r\n            stepVariant(price_selected, i)\r\n        }\r\n    }\r\n\r\n\r\n    const footer = (\r\n        <Stack>\r\n            <Stack.Item fill>\r\n                {pagination}\r\n            </Stack.Item>\r\n\r\n            <Stack.Item>\r\n                <Button primary onClick={handleSubmit} disabled={ !can_solve }>Guarda mi selección</Button>\r\n            </Stack.Item>\r\n        </Stack>\r\n    )\r\n\r\n    const currentVariant = variants_with_conflict.findIndex(e=>e.id===id) + 1\r\n\r\n    \r\n\r\n    return (\r\n        <Modal\r\n            large\r\n            open={modal_open}\r\n            onClose={handleClose}\r\n            title={`Conflicto ${currentVariant} de ${variants_with_conflict.length}`}\r\n            footer={footer}\r\n        >\r\n            <Modal.Section>\r\n                <TextContainer>\r\n\r\n                    <div>Nuestros expertos sugieren diferentes impuestos que los que usted ha indicado. Seleccione cual es el correcto.</div>\r\n                    <Stack distribution=\"fillEvenly\">\r\n                        <Stack.Item>\r\n                            <Stack>\r\n                                <Thumbnail\r\n                                    source={image_url}\r\n                                />\r\n                                <div>{title}</div>\r\n                            </Stack>\r\n                        </Stack.Item>\r\n\r\n                        <Stack.Item>\r\n                            <div>Precio Regular: ${price}</div>\r\n                            <div>Impuestos: seleccione a continuación</div>                            \r\n                        </Stack.Item>\r\n                    </Stack>\r\n\r\n                    <Stack distribution=\"fillEvenly\">\r\n                        <Card sectioned>\r\n\r\n                            <div className=\"title-wrapper\">\r\n                                <div className=\"subtitle\">Tu ingresaste</div>\r\n                            </div>\r\n\r\n                            <div className=\"title-price\">${price}</div>\r\n                            <p className=\"text-center\">Impuesto ${calculated_duty_original}</p>\r\n                            <div className=\"text-center mt-10\">\r\n                                <Button\r\n                                    onClick={()=>handleSelectPrice('original')}\r\n                                    primary={hasPaginator.price_selected==='original'}\r\n                                    icon={ hasPaginator.price_selected==='original' && MobileAcceptMajorMonotone}\r\n                                >\r\n                                    Seleccionar\r\n                                </Button>\r\n                            </div>\r\n                        </Card>\r\n\r\n                        <Card sectioned>\r\n\r\n                            <div className=\"title-wrapper\">\r\n                                <div className=\"subtitle\">Nosotros recomendamos</div>\r\n                            </div>\r\n\r\n                            <div className=\"title-price\">${recommended_price}</div>\r\n                            <p className=\"text-center\">Impuesto ${calculated_duty}</p>\r\n                            <div className=\"text-center mt-10\">\r\n                                <Button\r\n                                    onClick={()=>handleSelectPrice('recommended')}\r\n                                    primary={hasPaginator.price_selected==='recommended'}\r\n                                    icon={ hasPaginator.price_selected==='recommended' && MobileAcceptMajorMonotone}                                    \r\n                                >\r\n                                    Seleccionar\r\n                                </Button>\r\n                            </div>\r\n                        </Card>\r\n                    </Stack>\r\n\r\n                </TextContainer>\r\n            </Modal.Section>\r\n\r\n        </Modal>\r\n    )\r\n\r\n}\r\n\r\nexport default ResolveConflict"]},"metadata":{},"sourceType":"module"}