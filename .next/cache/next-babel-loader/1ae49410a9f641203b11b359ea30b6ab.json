{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Modal, Stack, Thumbnail, TextContainer, Card, Button, Pagination } from '@shopify/polaris';\nimport { MobileAcceptMajoMonotone } from '@shopify/polaris-icons';\nimport { useState, useEffect } from 'react';\n\nvar ResolveConflict = function ResolveConflict(_ref) {\n  var variants_with_conflict = _ref.variants_with_conflict,\n      variant_in_modal = _ref.variant_in_modal,\n      can_solve = _ref.can_solve,\n      modal_open = _ref.modal_open,\n      closeModal = _ref.closeModal,\n      stepVariant = _ref.stepVariant;\n\n  var _useState = useState({\n    hasNext: false,\n    hasPrevious: false,\n    price_selected: null\n  }),\n      hasPaginator = _useState[0],\n      setHasPaginator = _useState[1];\n\n  var id = variant_in_modal.id,\n      image_url = variant_in_modal.product_image,\n      title = variant_in_modal.product_title,\n      price = variant_in_modal.variant_price,\n      recommended_price = variant_in_modal.variant_recommended_price,\n      _variant_in_modal$tax = variant_in_modal.tax_calculated,\n      calculated_duty = _variant_in_modal$tax === void 0 ? 0 : _variant_in_modal$tax,\n      _variant_in_modal$cal = variant_in_modal.calculated_duty_original,\n      calculated_duty_original = _variant_in_modal$cal === void 0 ? 0 : _variant_in_modal$cal,\n      _variant_in_modal$pri = variant_in_modal.price_selected,\n      price_selected = _variant_in_modal$pri === void 0 ? null : _variant_in_modal$pri; // Cada que variant_in_mocal cambie verificamos el estado del paginador\n\n  useEffect(function () {\n    var v = variants_with_conflict;\n    var p = {\n      hasNext: false,\n      hasPrevious: false,\n      price_selected: price_selected\n    };\n    if (v.length <= 1) return setHasPaginator(p);\n    var i = v.findIndex(function (element) {\n      return element.id === id;\n    });\n    if (i > 0) p.hasPrevious = true;\n    if (i < v.length - 1) p.hasNext = true;\n    setHasPaginator(p);\n  }, [variant_in_modal]);\n  var pagination = null;\n\n  if (variants_with_conflict.length > 0) {\n    pagination = __jsx(Pagination, {\n      hasPrevious: true,\n      onPrevious: function onPrevious() {\n        console.log('Previous');\n      },\n      hastNext: true,\n      onNext: function onNext() {\n        console.log('Next');\n      }\n    });\n  }\n\n  var handleSubmit = function handleSubmit() {};\n\n  var handleClose = function handleClose() {\n    closeModal();\n  };\n\n  var handleSelectPrice = function handleSelectPrice(price_selected) {\n    setHasPaginator(_objectSpread({}, hasPaginator, {\n      price_selected: price_selected\n    }));\n    move(0, price_selected);\n  };\n\n  var move = function move(step, price_selected) {\n    if (price_selected === undefined) price_selected = hasPaginator.price_selected;\n    var v = variants_with_conflict;\n    var i = v.findIndex(function (e) {\n      return e.id === id;\n    });\n\n    if (i >= 0 && i < v.length) {\n      stepVariant(price_selected, i);\n    }\n  };\n\n  var footer = __jsx(Stack, null, __jsx(Stack.Item, {\n    fill: true\n  }, pagination), __jsx(Stack.Item, null, __jsx(Button, {\n    primary: true,\n    onClick: handleSubmit,\n    disabled: !can_solve\n  }, \"Guarda mi selecci\\xF3n\")));\n\n  return __jsx(Modal, {\n    large: true,\n    open: modal_open,\n    onClose: handleClose,\n    title: \"Resolver conflicto\",\n    footer: footer\n  }, __jsx(Modal.Section, null, __jsx(TextContainer, null, __jsx(\"div\", null, \"Nuestros expertos sugieren diferentes impuestos de los que usted ha indicado. Seleccione cual es el correcto\"), __jsx(Stack, {\n    distribution: \"fillEvenly\"\n  }, __jsx(Stack.Item, null, __jsx(Stack, null, __jsx(Thumbnail, {\n    source: image_url\n  }), __jsx(\"div\", null, title))), __jsx(Stack.Item, null, __jsx(\"div\", null, \"Regular price: $\", price), __jsx(\"div\", null, \"Impuestos: selecciona a continuaci\\xF3n\"))), __jsx(Stack, {\n    distribution: \"fillEvenly\"\n  }, __jsx(Card, {\n    sectioned: true\n  }, __jsx(\"div\", {\n    className: \"title-wrapper\"\n  }, __jsx(\"div\", {\n    className: \"subtitle\"\n  }, \"Tu ingresaste\")), __jsx(\"div\", {\n    className: \"title-price\"\n  }, \"$\", price), __jsx(\"p\", {\n    className: \"text-center\"\n  }, \"Impuesto $\", calculated_duty_original), __jsx(\"div\", {\n    className: \"text-center mt-10\"\n  }, __jsx(Button, {\n    onClick: function onClick() {\n      return handleSelectPrice('original');\n    },\n    primary: hasPaginator.price_selected === 'original',\n    icon: hasPaginator.price_selected === 'original' && MobileAcceptMajoMonotone\n  }, \"Seleccionar\"))), __jsx(Card, {\n    sectioned: true\n  }, __jsx(\"div\", {\n    className: \"title-wrapper\"\n  }, __jsx(\"div\", {\n    className: \"subtitle\"\n  }, \"Nosotros recomendamos\")), __jsx(\"div\", {\n    className: \"title-price\"\n  }, \"$\", recommended_price), __jsx(\"p\", {\n    className: \"text-center\"\n  }, \"Impuesto $\", calculated_duty), __jsx(\"div\", {\n    className: \"text-center mt-10\"\n  }, __jsx(Button, {\n    onClick: function onClick() {\n      return handleSelectPrice('recommended');\n    },\n    primary: hasPaginator.price_selected === 'recommended',\n    icon: hasPaginator.price_selected === 'recommended' && MobileAcceptMajoMonotone\n  }, \"Seleccionar\")))))));\n};\n\nexport default ResolveConflict;","map":{"version":3,"sources":["C:/Users/rafae/Desktop/Bootcamp/Front-Back/app_shopify/components/ResolveConflict.js"],"names":["Modal","Stack","Thumbnail","TextContainer","Card","Button","Pagination","MobileAcceptMajoMonotone","useState","useEffect","ResolveConflict","variants_with_conflict","variant_in_modal","can_solve","modal_open","closeModal","stepVariant","hasNext","hasPrevious","price_selected","hasPaginator","setHasPaginator","id","image_url","product_image","title","product_title","price","variant_price","recommended_price","variant_recommended_price","tax_calculated","calculated_duty","calculated_duty_original","v","p","length","i","findIndex","element","pagination","console","log","handleSubmit","handleClose","handleSelectPrice","move","step","undefined","e","footer"],"mappings":"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","sourcesContent":["import { Modal, \r\n    Stack, \r\n    Thumbnail, \r\n    TextContainer, \r\n    Card, \r\n    Button, \r\n    Pagination} \r\nfrom '@shopify/polaris'\r\n\r\nimport { MobileAcceptMajoMonotone } from '@shopify/polaris-icons'\r\n\r\nimport { useState, useEffect } from 'react'\r\n\r\nconst ResolveConflict = ({\r\n    variants_with_conflict,\r\n    variant_in_modal,\r\n    can_solve,\r\n    modal_open,\r\n\r\n    closeModal,\r\n    stepVariant\r\n})=>{\r\n\r\n    const [hasPaginator, setHasPaginator] = useState({ hasNext: false, hasPrevious: false, price_selected: null })\r\n    \r\n    const {\r\n        id,\r\n        product_image: image_url,\r\n        product_title: title,\r\n        variant_price: price,\r\n        variant_recommended_price: recommended_price,\r\n        tax_calculated: calculated_duty = 0,\r\n        calculated_duty_original = 0,\r\n        price_selected = null\r\n    } = variant_in_modal\r\n\r\n\r\n    // Cada que variant_in_mocal cambie verificamos el estado del paginador\r\n    useEffect(() => {\r\n        const v = variants_with_conflict\r\n        let p = {hasNext: false, hasPrevious: false, price_selected}\r\n        if(v.length <= 1) return setHasPaginator(p)\r\n        const i = v.findIndex(element => element.id === id)\r\n        if(i>0) p.hasPrevious = true;\r\n        if(i<v.length-1) p.hasNext = true;\r\n        setHasPaginator(p)\r\n    },[variant_in_modal])\r\n\r\n\r\n    let pagination = null\r\n    if(variants_with_conflict.length > 0) {\r\n        pagination = (\r\n            <Pagination\r\n                hasPrevious={true}\r\n                onPrevious={() => {\r\n                    console.log('Previous')\r\n                }}\r\n                hastNext={true}\r\n                onNext={() => {\r\n                    console.log('Next')\r\n                }}\r\n            />\r\n        )\r\n    }\r\n\r\n    const handleSubmit = () => {\r\n\r\n    }    \r\n    \r\n    const handleClose = () => {\r\n        closeModal()\r\n    }\r\n\r\n    const handleSelectPrice = (price_selected) => {\r\n        setHasPaginator({ ...hasPaginator, price_selected })\r\n        move(0, price_selected)\r\n\r\n    }\r\n\r\n    const move = (step, price_selected) => {\r\n        if(price_selected === undefined) price_selected = hasPaginator.price_selected\r\n        const v = variants_with_conflict\r\n        const i = v.findIndex(e => e.id === id)\r\n        if(i>=0 && i<v.length){\r\n            stepVariant(price_selected, i)\r\n        }\r\n    }\r\n\r\n    const footer = (\r\n        <Stack>\r\n            <Stack.Item fill>\r\n                {pagination}\r\n            </Stack.Item>\r\n            \r\n            <Stack.Item>\r\n                <Button primary onClick={handleSubmit} disabled={ !can_solve }>Guarda mi selección</Button>\r\n            </Stack.Item>\r\n        </Stack>\r\n    )\r\n    \r\n\r\n    return (\r\n        <Modal\r\n        large\r\n        open={modal_open}\r\n        onClose={handleClose}\r\n        title={`Resolver conflicto`}\r\n        footer={footer}\r\n        >\r\n            <Modal.Section>\r\n\r\n            <TextContainer>\r\n                <div>Nuestros expertos sugieren diferentes impuestos de los que usted ha indicado. Seleccione cual es el correcto</div>\r\n                <Stack distribution=\"fillEvenly\">\r\n                    <Stack.Item>\r\n                        <Stack>\r\n                            <Thumbnail \r\n                            source={image_url}\r\n                            />\r\n                            <div>{title}</div>\r\n                        </Stack>                        \r\n                    </Stack.Item>\r\n                    <Stack.Item>\r\n                        <div>Regular price: ${price}</div>\r\n                        <div>Impuestos: selecciona a continuación</div>\r\n                    </Stack.Item>\r\n                </Stack>\r\n                <Stack distribution=\"fillEvenly\">\r\n                    <Card sectioned>\r\n                        <div className=\"title-wrapper\">\r\n                            <div className=\"subtitle\">Tu ingresaste</div>\r\n                        </div>\r\n                        <div className=\"title-price\">${price}</div>\r\n                        <p className=\"text-center\">Impuesto ${calculated_duty_original}</p>\r\n                        <div className=\"text-center mt-10\">\r\n                            <Button \r\n                                onClick={() => handleSelectPrice('original')}\r\n                                primary={hasPaginator.price_selected==='original'}                        \r\n                                icon={ hasPaginator.price_selected==='original' && MobileAcceptMajoMonotone}                        \r\n                            >\r\n                                Seleccionar\r\n                            </Button>\r\n                        </div>\r\n                    </Card>\r\n                    <Card sectioned>\r\n                        <div className=\"title-wrapper\">\r\n                            <div className=\"subtitle\">Nosotros recomendamos</div>\r\n                        </div>\r\n                        <div className=\"title-price\">${recommended_price}</div>\r\n                        <p className=\"text-center\">Impuesto ${calculated_duty}</p>\r\n                        <div className=\"text-center mt-10\">\r\n                            <Button \r\n                                onClick={() => handleSelectPrice('recommended')}\r\n                                primary={hasPaginator.price_selected==='recommended'}                        \r\n                                icon={ hasPaginator.price_selected==='recommended' && MobileAcceptMajoMonotone}\r\n                            >\r\n                                Seleccionar\r\n                            </Button>\r\n                        </div>\r\n                    </Card>                \r\n                </Stack>\r\n            </TextContainer>\r\n            </Modal.Section>\r\n            \r\n        </Modal>\r\n    )\r\n\r\n}\r\n\r\nexport default ResolveConflict"]},"metadata":{},"sourceType":"module"}